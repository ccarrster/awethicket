<!DOCTYPE html>
<html>
<head>
<title>Awe Thicket</title>
<style>

</style>
</head>
<body>
<script src="jquery-3.3.1.min.js"></script>
<script>
    var numberOfPlayers = null;
    var firstPlayer = null;
    var mushroomBoards = [];
    var crateNumbers = [1, 2, 3, 4, 4];
    var mushroomNames = ['Girolles', 'Morels', 'Boletes', 'Parasol'];
    var playerColors = ['Blue', 'Green', 'Purple', 'Red', 'Orange'];
    var players = [];
    

    class player{
        constructor(inPlayerIndex){
            this.playerIndex = inPlayerIndex;
            this.availableCrates = null;
            this.maxAvailableCrates = null;
            this.mushrooms = [0, 0, 0, 0];
            this.informationPieces = [];
            this.points = 0;
        }
    }
    class mushroomBoard{
        constructor(inMushroomType, inNumPlayers){
            this.mushroomType = inMushroomType;
            this.crates = [null, null, null, null, null];
            this.information = null;
            this.mushroomQuantity = 0;
            this.sharedInformation = [];
            if(inNumPlayers == 2){
                this.mushroomQuantity = 8;
            } else if(inNumPlayers == 3){
                this.mushroomQuantity = 10;
            } else if(inNumPlayers == 4){
                this.mushroomQuantity = 12;
            } else if(inNumPlayers == 5){
                this.mushroomQuantity = 14;
            } else {
                alert('This is the wrong number of players. Between 2 and 5 please.');
            }
        }
    }
    class information{
        constructor(){
            this.mushroomType = null;
            this.pointValue = null;
        }
    }
    class informationDeck{
        constructor(){
            this.informationPieces = [];
        }
    }
    function isGameOver(){
        var emptyBoardCount = 0;
        for(var i = 0; i < mushroomBoards.length; i++){
            var currentMushroomBoard = mushroomBoards[i];
            if(currentMushroomBoard.mushroomQuantity == 0){
                emptyBoardCount += 1;
            }
        }
        if(emptyBoardCount > 1){
            return true;
        } else {
            return false;
        }
    }

    function gameSetup(inNumPlayers){
        for(var mushroomType = 0; mushroomType < 4; mushroomType++){
            currentMushroomBoard = new mushroomBoard(mushroomType, inNumPlayers);
            mushroomBoards.push(currentMushroomBoard);
        }
        for(var playerIndex = 0; playerIndex < inNumPlayers; playerIndex++){
            var currentPlayer = new player(playerIndex);
            currentPlayer.maxAvailableCrates = 5;
            currentPlayer.availableCrates = currentPlayer.maxAvailableCrates;
            players.push(currentPlayer);
        }
        
    }

    //Start Game
    //console.log(isGameOver());

    function choosePlayers(inPlayerNumber){
        $("#setup").hide();
        gameSetup(inPlayerNumber);
        refreshMushroomBoards();
        refreshPlayerBoards();
    }

    function refreshMushroomBoards(){
        var mushroomBoardString = '';
        for(var i = 0; i < mushroomBoards.length; i++){
            var mushroomBoard = mushroomBoards[i];
            var cratesString = "<div>";
            for(var j = 0; j < mushroomBoard.crates.length; j++){
                var cratePlayer = mushroomBoard.crates[j];
                var crateCount = crateNumbers[j];
                cratesString += "<div>Crate Number: " + crateCount + " Crate Player: " + getPlayerColor(cratePlayer) + "</div>";
            }
            cratesString += "</div>";
            mushroomBoardString += "<div>Mushroom Type: "+getMushroomName(mushroomBoard.mushroomType)+" Quantity: "+mushroomBoard.mushroomQuantity+" " + cratesString + "</div>";
        }
        $("#mushroomBoards").html(mushroomBoardString);
    }

    function getMushroomName(typeIndex){
        return mushroomNames[typeIndex];
    }

    function getPlayerColor(playerIndex){
        if(playerIndex == null){
            return 'Empty';
        } else {
            return playerColors[playerIndex];
        }
    }

    function refreshPlayerBoards(){
        var playerBoardString = '';
        for(var i = 0; i < players.length; i++){
            var playerString = '<div style="background-color:' + getPlayerColor(i) + '">' + getPlayerColor(i);
            var currentPlayer = players[i];
            playerString += '</div>';
            playerBoardString += playerString;
        }
        $("#playerBoards").html(playerBoardString);
    } 
    
    
</script>
<div id="setup">
    <form>
        <input type="button" value="2 Players" onclick="choosePlayers(2);">
        <input type="button" value="3 Players" onclick="choosePlayers(3);">
        <input type="button" value="4 Players" onclick="choosePlayers(4);">
        <input type="button" value="5 Players" onclick="choosePlayers(5);">
    </form>
</div>
<div id="mushroomBoards"></div>
<div id="playerBoards"></div>
<div id="gameHistory"></div>
<div id="secrets"></div>
</body>
</html>